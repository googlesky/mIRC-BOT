on 1:TEXT:!xidach *:%r: { 
  if (%blackjack != off) { noticeVC $nick XÃ¬ DÃ¡ch: Ãang choÂ’i hoÃ¥c chuÂ’a Ã°ÃªÂ´n giÃ²Â’... | .ignore -u3 $nick | halt }
  ;if ($gettok($readini(hethong\login.ini,dangnhap,$nick),1,32) == $null) { noticeVC $nick 4,01 $nick 9,01chuÂ’a ÃÃ¥ng kÃ½ , ÃÃªÂ² Ã°Ã¥ng kÃ½ choÂ’i game , 8GÃµ 11/msg $me 4!register <pass1> <pass2> | .ignore -u5 $nick }
  ;if ($gettok($readini(hethong\login.ini,dangnhap,$nick),1,32) != $null) && ($level($nick) < 3) { noticeVC $nick 4,01 $+ $nick 9,01ChuÂ’a Login , 13/msg $me !identify <pass> , 9ÃÃªÂ² choÂ’i Games | .ignore -u5 $nick }
  if ($level($nick) >= 3) && ($ChkBet($nick,$2) == True) {
    if ($2 == $null) || ($2 <= 0) || ($2 !isnum) { noticeVC $nick Ba.n Ã°Ã¥.t khÃ´ng Ã°Ãºng rÃ´Ã¬ thuÂ’~ la.i Ã°i | halt }
    %tien.cosan = $coidiem(Diem,$nick)
    if (%tien.cosan < $2) || (%tien.cosan == $null) { noticeVC $nick Ba.n khÃ´ng cÃ³ Ã°uÂ² tiÃª`n Ã°ÃªÂ² choÂ’i | halt }
    if ($istok(%nicks.blackjack,$nick,32) == $True) { noticeVC $nick Ba.n Ã°Ã£ Ã°Ã¥t cuÂ’oÂ’c rÃ´Ã¬ | halt }
    else {
      set -u1 %cobac $nick
      inc %blackjack.thutu 1
      set %nicks.blackjack %nicks.blackjack  $+ $nick
      set %nick.blackjack [ $+ [ %blackjack.thutu ] ] $nick
      set %nick.tiendat [ $+ [ %blackjack.thutu ] ] $2
      describeVC %r 3-=[8,1 %cobac 3]=- 12Ã°Ã£ Ã°Ã¥.t 4XÃ¬ DÃ¡ch 12vÃ³Â’i sÃ´' tiÃª`n lÃ  04,01$ $+ $tien($2) $+ $iif($2 >= 500000000000, 12Ãai gia quÃ¡ ^_^)
      .ignore $nick
    }
  }
}

on 1:TEXT:!keo*:%r: {
  if (%blackjackplay != on) { noticeVC $nick XÃ¬ DÃ¡ch: Ãang choÂ’i hoÃ¥c chuÂ’a Ã°ÃªÂ´n giÃ²Â’... | .ignore -u3 $nick | halt }
  if ($nick == %nick.blackjack [ $+ [ %currentplayer ] ]) { .timerblackjack off | keoblackjack $nick | inc %solankeo }
}

on 1:TEXT:!ngung*:%r: {
  if (%blackjackplay != on) { noticeVC $nick XÃ¬ DÃ¡ch: Ãang choÂ’i hoÃ¥c chuÂ’a Ã°ÃªÂ´n giÃ²Â’... | .ignore -u3 $nick | halt }
  if ($nick == %nick.blackjack [ $+ [ %currentplayer ] ]) { .ignore $nick | .timer 1 1 describeVC %r 03 $+ $nick 4ÃÃ£ nguÂ’ng kÃ©o tÃ³Â’i luÂ’oÂ’t nguÂ’Ã²Â’i khÃ¡c... | ngungblackjack $nick | .timerblackjack off } 
}


alias xidach {
  unset %bobai %score.* %nick.blackjack* %cards.* %nick.tiendat* %blackjack.thutu %currentplayer %blackjack.nickwins %nicks.blackjack
  ;2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A
  set %bobai 2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A
  ;set %bobai A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K.A.K

  batdaublackjack cai
  .timers off | ignore -r | .disable #LoDe
  .timer 1 2 set %blackjack off
  var %GameMini 1,1 00,03X00,01Ã¬03,03 00,01D00,03Ã¡00,01c00,03h01,01 
  describeVC %r 2=-=-=-=-=-=3*4$12*3$4*12$3*2|[ $InsertBC(%GameMini) 2]|3*12$4*3$12*4$3*2=-=-=-=-=-=
  .timerblackjack1 1 1 describeVC %r $InsertSymbol(1,0GÃµ 8-=[ 11 $+ $InsertBC(!XiDach) $+  04<TÃ¬Ãªn> 8]=- 0Ã°ÃªÂ² 0tham 0gia 0cÃ²Â’ 0bac! ChoÂ’i nhanh keÂ²o 4CÃ´ng 4An bÃ¥Â´t... MÃ´~i ngu+Ã²Â’i chiÂ² cÃ³ 25s thÃ´i nhÃ©!!!)
  .timer 1 2 describeVC %r $InsertSymbol(0,3ChÃº 3Ã½: 4XÃ¬ 4BÃ ng: ÃuÂ’oÂ’c nhÃ¢n 5; 4XÃ¬ 4DÃ¡ch + 4Ngu~ 4Linh: ÃuÂ’oÂ’c nhÃ¢n 2; 4Tam 4ThÃ¢Â´t 04(777): ÃuÂ’oÂ’c nhÃ¢n 7. ChÃºc cÃ¡c ban may mÃ¥Â´n!)

  .timerblackjack2 1 40 describeVC %r 4ThÃ²Â’i gian Ã°Ã¥.t tiÃª`n Ã°Ã£ hÃªÂ´t !!! ÃÃ¥.t xong lÃ¢Ã½ cÃ¡i tay ra nha !!! BÃ¥Â´t Ã°Ã¢Ã¹ chia bÃ i !!!
  .timerblackjack3 1 40 ignore -r
  .timerblackjack4 1 3 noticeVC $iif(LangTuBuon ison %r,LangTuBuon) $+ , $+ $iif(LaNgTu ison %r,LaNgTu) $+ , $+ $iif(DrKhoQua ison %r,DrKhoQua) $+ , $+ $iif(DrKhoQua-AR ison %r,DrKhoQua-AR) $+ , $+ $iif(vuichat ison %r,vuichat) 4BÃ i cuÂ²a BOT: %score.cai 3 %cards.cai
  .timerblackjack5 1 40 set %blackjack on
  .timerblackjack6 1 41 kiemtrablackjack
  .timerblackjack7 1 43 set %blackjackplay on
  .timerblackjack8 1 43 startgameblackjack
}
alias kiemtrablackjack {
  if (%nick.blackjack1 == $null) || (%nick.tiendat1 == $null) { unset %bobai %score.* %nick.blackjack* %cards.* %nick.tiendat* %blackjack.thutu %currentplayer %blackjack.nickwins %nicks.blackjack %solankeo
    set %blackjackplay off
    .timers off
    describeVC %r 4KhÃ´ng cÃ³ Gamer nÃ o choÂ’i nÃªn vÃ¡n nÃ y Ã°uÂ’oÂ’.c dÃ¹Â’ng la.i!
    .timergamez 1 %quacau choigame
    .enable #LoDe
  }
  else { return }
}
alias startgameblackjack {
  describeVC %r 3BÃ i cuÂ²a 4Bot3:7 $gettok(%cards.cai,1,32) 4*
  set %currentplayer 1
  .timer 1 1 describeVC %r 0,14Â¤8,1 Player 0,14Â¤0,4Â¤9,1 9,1 $+ %nick.blackjack1 0,4Â¤04,01 08$ $+ $tien(%nick.tiendat1) 
  .timer 1 1 batdaublackjack %nick.blackjack1
}
alias batdaublackjack {
  set %solankeo 0
  var %sobai = $numtok(%bobai,46)
  if (%sobai == 0) { set %bobai 2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A | var %sobai = $numtok(%bobai,46) }
  var %i = $r(1,%sobai)
  var %temp = $gettok(%bobai,%i,46)
  %bobai = $deltok(%bobai,%i,46)
  var %sobai = $numtok(%bobai,46)
  if (%sobai == 0) { set %bobai 2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A | var %sobai = $numtok(%bobai,46) }
  var %i = $r(1,%sobai)
  var %temp = %temp $gettok(%bobai,%i,46)
  %bobai = $deltok(%bobai,%i,46)
  var %sobai = $numtok(%bobai,46)
  if (%sobai == 0) { set %bobai 2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A | var %sobai = $numtok(%bobai,46) }
  set %cards. [ $+ [ $1 ] ] %temp
  set %score. [ $+ [ $1 ] ] $tinhdiemblackjack(%temp)

  var %sodiem = %score. [ $+ [ $1 ] ]
  if ($1 == cai) && (%sodiem < 17) { inc %solankeo | keoblackjack cai }
  ;$mahoa(12ÃuÂ’oÂ’.c -=> $mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z)
  ;$mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z) -=> $mahoa($iif($r(0,1)=0,ÃuÂ’oÂ’.c,Ban ÃuÂ’oÂ’.c) 
  ;$InsertSymbol(1,04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04)) -=> $InsertSymbol(1,$iif($r(0,1) == 0,01 $+ $r(0,9)) $+ 04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04) $+ $iif($r(0,1) == 0,01 $+ $r(0,9)))
  if ((%sodiem >= 21) || (%sodiem == XÃ¬ DÃ¡ch) || (%sodiem == XÃ¬ BÃ ng)) && ($1 != cai) {
    ;.timer 1 1 describeVC %r 12BÃ i CuÂ²a $InsertSymbol(1,03 $+ $1) $+  12LÃ :4 %temp $mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z) $InsertSymbol(1,04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04)) $+  12ÃiÃªÂ²m)
    .timer 1 1 describeVC %r 12BÃ i LÃ :4 %temp $mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z) $InsertSymbol(1,04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04)))
    .timer 1 2 describeVC %r 12Xin chÃºc mÃ¹Â’ng ban! 4Ã15Ã´~ 4M15uÂ’Ã²Â’i 12hÃ´m nay chia bÃ i Ãen thÃªÂ´ nhiÂ²?
  }
  elseif ((%sodiem < 21) && (%sodiem != XÃ¬ DÃ¡ch) && (%sodiem != XÃ¬ BÃ ng)) && ($1 != cai) {
    .timer 1 1 describeVC %r 12BÃ i LÃ :4 %temp $mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z) $InsertSymbol(1,$iif($r(0,1) == 0,01 $+ $r(0,9)) $+ 04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04) $+ $iif($r(0,1) == 0,01 $+ $r(0,9))) $+  12ÃiÃªÂ²m)
    .timerblackjack1 1 2 describeVC %r 12Ba.n CÃ³ ThÃªÂ²4 !ngung 12NÃªÂ´u ThÃ¢Â´y ÃÃ£ ÃuÂ² ÃiÃªÂ²m HoÃ¥.c4 !keo 12NÃªÂ´u ThÃ¢Â´y BÃ i ChuÂ’a ÃuÂ² ÃiÃªÂ²m
    .timerblackjack 1 25 blackjacktimeout $1 | goto end
  }
  if (%currentplayer < %blackjack.thutu) && ($1 != cai) {
    set %solankeo 0
    if (%sodiem != 21) && (%sodiem != XÃ¬ DÃ¡ch) && (%sodiem != XÃ¬ BÃ ng) {
      .timer 1 1 describeVC %r 12BÃ i LÃ :4 %temp $mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z) $InsertSymbol(1,$iif($r(0,1) == 0,01 $+ $r(0,9)) $+ 04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04) $+ $iif($r(0,1) == 0,01 $+ $r(0,9))) $+  12ÃiÃªÂ²m)
      .timerblackjack1 1 2 describeVC %r 12Ba.n CÃ³ ThÃªÂ²4 !ngung 12NÃªÂ´u ThÃ¢Â´y ÃÃ£ ÃuÂ² ÃiÃªÂ²m HoÃ¥.c4 !keo 12NÃªÂ´u ThÃ¢Â´y BÃ i ChuÂ’a ÃuÂ² ÃiÃªÂ²m
    }
    ;else { .timerblackjack1 1 2 describeVC %r CÃ¢`n viÃª't zÃ¬ nhi?? }
    elseif (%sodiem < 21) || (%sodiem == XÃ¬ DÃ¡ch) || (%sodiem == XÃ¬ BÃ ng) { .timerblackjack1 1 3 describeVC %r 0,14Â¤8,1 Player 0,14Â¤0,4Â¤9,1 9,1 $+ %nick.blackjack [ $+ [ $calc(%currentplayer + 1) ] ] 0,4Â¤04,01 08$ $+ $tien(%nick.tiendat [ $+ [ $calc(%currentplayer + 1) ] ])  }
    .timerblackjack9 1 3 batdaublackjack %nick.blackjack [ $+ [ $calc(%currentplayer + 1) ] ]
    .timer 1 3 set %currentplayer $calc(%currentplayer + 1)
  }
  elseif (%currentplayer >= %blackjack.thutu) && ($1 != cai) && (%blackjack.thutu != $null) {
    .timer 1 3 tinhdiemchungcuoc
  }
  :end
}
alias blackjacktimeout {
  set %score. [ $+ [ $1 ] ] 0
  .ignore $1
  describeVC %r 12HÃªÂ´t thÃ²Â’i gian.3 $1 12bi mÃ¢Â´t luÂ’oÂ’t!
  if (%currentplayer < %blackjack.thutu) {
    set %solankeo 0
    .timerblackjack8 1 2 describeVC %r 0,14Â¤8,1 Player 0,14Â¤0,4Â¤9,1 9,1 $+ %nick.blackjack [ $+ [ $calc(%currentplayer + 1) ] ] 0,4Â¤04,01 08$ $+ $tien(%nick.tiendat [ $+ [ $calc(%currentplayer + 1) ] ]) 
    .timerblackjack9 1 3 batdaublackjack %nick.blackjack [ $+ [ $calc(%currentplayer + 1) ] ]
    .timer 1 3 set %currentplayer $calc(%currentplayer + 1)
  }
  else {
    .timer 1 3 tinhdiemchungcuoc
  }
}
alias ngungblackjack {
  if (%currentplayer < %blackjack.thutu) {
    set %solankeo 0
    .timerblackjack8 1 2 describeVC %r 0,14Â¤8,1 Player 0,14Â¤0,4Â¤9,1 9,1 $+ %nick.blackjack [ $+ [ $calc(%currentplayer + 1) ] ] 0,4Â¤04,01 08$ $+ $tien(%nick.tiendat [ $+ [ $calc(%currentplayer + 1) ] ]) 
    .timerblackjack9 1 3 batdaublackjack %nick.blackjack [ $+ [ $calc(%currentplayer + 1) ] ]
    .timer 1 3 set %currentplayer $calc(%currentplayer + 1)
  }
  else {
    .timer 1 3 tinhdiemchungcuoc
  }
}
alias keoblackjack { 
  var %sobai = $numtok(%bobai,46)
  if (%sobai == 0) { set %bobai 2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A | var %sobai = $numtok(%bobai,46) }
  var %i = $r(1,%sobai)
  %cards. [ $+ [ $1 ] ] = %cards. [ $+ [ $1 ] ] $gettok(%bobai,%i,46)

  var %temp = %cards. [ $+ [ $1 ] ]
  %bobai = $deltok(%bobai,%i,46)
  var %sobai = $numtok(%bobai,46)
  if (%sobai == 0) { set %bobai 2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A.2.3.4.5.6.7.8.9.10.J.Q.K.A | var %sobai = $numtok(%bobai,46) }
  %score. [ $+ [ $1 ] ] = $tinhdiemblackjack(%temp)
  var %sodiem = %score. [ $+ [ $1 ] ]

  if ($1 == cai) && (%sodiem < 17) && (%solankeo < 3) { tieptuckeo }
  ;if ((%sodiem = 21) && ($1 != cai)) || (%solankeo == 3) { .timer 1 1 describeVC %r 12BÃ i LÃ :4 %temp $mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z) $InsertSymbol(1,$iif($r(0,1) == 0,01 $+ $r(0,9)) $+ 04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04) $+ $iif($r(0,1) == 0,01 $+ $r(0,9))) $+  12ÃiÃªÂ²m) | goto hichichic }
  if (((%sodiem = Tam ThÃ¢Â´t) || (%sodiem = Ngu~ Linh) || (%sodiem = XÃ¬ DÃ¡ch) || (%sodiem = XÃ¬ BÃ ng)) && ($1 != cai)) || (%solankeo == 3) { .timer 1 1 describeVC %r 12BÃ i LÃ :4 %temp $mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z) $InsertSymbol(1,$iif($r(0,1) == 0,01 $+ $r(0,9)) $+ 04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04) $+ $iif($r(0,1) == 0,01 $+ $r(0,9)))) | .timer 1 2 describeVC %r 12BÃ i 03 $+ $1 12Ã°oÂ² thÃªÂ´. Xin chÃºc mÃ¹Â’ng ban! | goto hichichic }
  if ((%sodiem > 21) && ($1 != cai)) || (%solankeo == 3) { .ignore $1 | .timer 1 1 describeVC %r 12BÃ i LÃ :4 %temp $mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z) $InsertSymbol(1,$iif($r(0,1) == 0,01 $+ $r(0,9)) $+ 04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04) $+ $iif($r(0,1) == 0,01 $+ $r(0,9))) $+  12ÃiÃªÂ²m) | .timer 1 2 describeVC %r $iif($numtok(%temp,32) >= 5,12ChÃºc mÃ¹Â’ng. Ban Ã°uÂ’oÂ’c Ngu~ LuÃ´n nhÃ©!,12Ba.n Ã°Ã£ bi. 4BURSTED 12ba.n khÃ´ng Ã°uÂ’oÂ’.c kÃ©o nuÂ’Ã£) }
  else if (%sodiem <= 21) && ($1 != cai) { .timer 1 1 describeVC %r 12BÃ i LÃ :4 %temp $mahoa(12ÃuÂ’oÂ’.c0 $+ $r(a,z) $InsertSymbol(1,$iif($r(0,1) == 0,01 $+ $r(0,9)) $+ 04 $+ $replace(%sodiem,$chr(32),$chr(32) $+ 04) $+ $iif($r(0,1) == 0,01 $+ $r(0,9))) $+  12ÃiÃªÂ²m) | .timerblackjack1 1 2 describeVC %r 12Ba.n CÃ³ ThÃªÂ²4 !ngung 12NÃªÂ´u ThÃ¢Â´y ÃÃ£ ÃuÂ² ÃiÃªÂ²m HoÃ¥.c4 !keo 12NÃªÂ´u ThÃ¢Â´y BÃ i ChuÂ’a ÃuÂ² ÃiÃªÂ²m
    .timerblackjack 1 25 blackjacktimeout $1 | goto end
  }
  :hichichic
  if (%currentplayer < %blackjack.thutu) && ($1 != cai) {
    set %solankeo 0
    .timerblackjack8 1 2 describeVC %r 0,14Â¤8,1 Player 0,14Â¤0,4Â¤9,1 9,1 $+ %nick.blackjack [ $+ [ $calc(%currentplayer + 1) ] ] 0,4Â¤04,01 08$ $+ $tien(%nick.tiendat [ $+ [ $calc(%currentplayer + 1) ] ]) 
    .timerblackjack9 1 3 batdaublackjack %nick.blackjack [ $+ [ $calc(%currentplayer + 1) ] ]
    .timer 1 3 set %currentplayer $calc(%currentplayer + 1)
  }
  else if (%currentplayer >= %blackjack.thutu) && ($1 != cai) {
    .timer 1 3 tinhdiemchungcuoc
  }
  :end
}
alias tieptuckeo { inc %solankeo | keoblackjack cai }

alias tinhdiemblackjack {
  var %i = $numtok($1-,32)
  var %x = 1
  var %sodiem = 0
  var %aces = 0
  while (%x <= %i) {
    var %z = $gettok($1-,%x,32) 
    if (%z == J) || (%z == Q) || (%z == K) { var %sodiem = %sodiem + 10 | goto next }
    if (%z == A) { var %n = $calc(%sodiem + 11)
      if (%i == 2) { 
        if (%n > 21) { var %sodiem = %sodiem + 10 | goto next }
        else  { var %sodiem = %sodiem + 11 | goto next }
      }
      else {
        var %sodiem = %sodiem + 11 | inc %aces 1 | goto next
      }
    }
    else var %sodiem = %sodiem + %z
    :next 
    %x = %x + 1
  }
  if (%sodiem > 21) && (%aces > 0) {
    while (%sodiem > 21) && (%aces > 0) {
      ;var %sodiem = %sodiem - 10
      ;dec %aces 1
      if ($calc(%sodiem - 1) > 21) { set %sodiem %sodiem - 10 | dec %aces 1 }
      else { set %sodiem %sodiem - 1 | dec %aces 1 }
    }
  }
  if (%i == 5) && (%sodiem <= 21) { set %sodiem Ngu~ Linh }
  if (%i == 2) && (%sodiem = 21) { set %sodiem XÃ¬ DÃ¡ch }
  if ($1- == 7 7 7) { set %sodiem Tam ThÃ¢Â´t }
  if ($1- == A A) { set %sodiem XÃ¬ BÃ ng }
  return %sodiem
}

alias tinhdiemchungcuoc {
  unset %currentplayer %solankeo
  var %i = 1, %x = $calc($numtok(%cards.cai,32) * 6)
  while (%i <= %blackjack.thutu) {
    var %nick = %nick.blackjack [ $+ [ %i ] ]
    var %score = %score. [ $+ [ %nick ] ]
    if (%score == XÃ¬ BÃ ng) { set %score1 21 }
    elseif (%score == XÃ¬ DÃ¡ch) { set %score1 20.9 }
    elseif (%score == Ngu~ Linh) { set %score1 20.7 }
    elseif (%score == 21) || (%score == Tam ThÃ¢Â´t) { set %score1 20.5 }
    else { set %score1 %score }

    if (%score.cai == XÃ¬ BÃ ng) { set %score.cai1 21 }
    elseif (%score.cai == XÃ¬ DÃ¡ch) { set %score.cai1 20.9 }
    elseif (%score.cai == Ngu~ Linh) { set %score.cai1 20.7 }
    elseif (%score.cai == 21) || (%score.cai == Tam ThÃ¢Â´t) { set %score.cai1 20.5 }
    else { set %score.cai1 %score.cai }

    var %tiendat = %nick.tiendat [ $+ [ %i ] ]
    if (%score1 === 0) {
      ghidiem Diem %nick $calc($coidiem(Diem,%nick) - %tiendat)
      .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12MÃ¢Â´t luÂ’oÂ’t 03Thua 04,01$ $+ $tien(%tiendat) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
      inc %x 2
      goto next1
    }
    if (%score1 < 16) {
      ghidiem Diem %nick $calc($coidiem(Diem,%nick) - (%tiendat * 2))
      .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  12ÃiÃªÂ²m (ChuÂ’a Ã°uÂ² tÃ¢Â²y 16 - Ban bi Phat gÃ¢Â´p Ã°Ã´i) 03Thua 04,01$ $+ $tien($calc(%tiendat * 2)) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
      inc %x 2
      goto next1
    }
    if (%score1 > %score.cai1) && (%score1 <= 21) && (%score1 >= 16) && (%score.cai1 <= 21) {
      set %blackjack.nickwins %blackjack.nickwins  $+ $r(2,14) $+ %nick
      if (%score == XÃ¬ BÃ ng) || (%score == XÃ¬ DÃ¡ch) || (%score == Ngu~ Linh) || (%score == Tam ThÃ¢Â´t) {
        if (%score == XÃ¬ BÃ ng) {
          ghidiem Diem %nick $calc($coidiem(Diem,%nick) + (%tiendat * 5))
          .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  04ThÃ¥Â´ng 04,01$ $+ $tien($calc(%tiendat * 5)) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick)) $+  Ban Ã°uÂ’oÂ’c nhÃ¢n NÃ¥m sÃ´Â´ tiÃª`n Ã°Ã¥t cuÂ’oÂ’c
        }
        elseif (%score == Tam ThÃ¢Â´t) {
          ghidiem Diem %nick $calc($coidiem(Diem,%nick) + (%tiendat * 7))
          .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  04ThÃ¥Â´ng 04,01$ $+ $tien($calc(%tiendat * 7)) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick)) $+  Ban Ã°uÂ’oÂ’c nhÃ¢n BaÂ²y sÃ´Â´ tiÃª`n Ã°Ã¥t cuÂ’oÂ’c
        }
        else {
          ghidiem Diem %nick $calc($coidiem(Diem,%nick) + (%tiendat * 2))
          .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  04ThÃ¥Â´ng 04,01$ $+ $tien($calc(%tiendat * 2)) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick)) $+  Ban Ã°uÂ’oÂ’c nhÃ¢n ÃÃ´i sÃ´Â´ tiÃª`n Ã°Ã¥t cuÂ’oÂ’c
        }
      }
      else {
        ghidiem Diem %nick $calc($coidiem(Diem,%nick) + %tiendat)
        .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  12ÃiÃªÂ²m 04ThÃ¥Â´ng 04,01$ $+ $tien(%tiendat) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
      }
      inc %x 2
    }
    if (%score1 < %score.cai1) && (%score1 <= 21) && (%score.cai1 > 21) {
      set %blackjack.nickwins %blackjack.nickwins  $+ $r(2,14) $+ %nick
      if (%score == XÃ¬ BÃ ng) || (%score == XÃ¬ DÃ¡ch) || (%score == Ngu~ Linh) || (%score == Tam ThÃ¢Â´t) {
        if (%score == XÃ¬ BÃ ng) {
          ghidiem Diem %nick $calc($coidiem(Diem,%nick) + (%tiendat * 5))
          .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  04ThÃ¥Â´ng 04,01$ $+ $tien($calc(%tiendat * 5)) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick)) $+  Ban Ã°uÂ’oÂ’c nhÃ¢n NÃ¥m sÃ´Â´ tiÃª`n Ã°Ã¥t cuÂ’oÂ’c
        }
        elseif (%score == Tam ThÃ¢Â´t) {
          ghidiem Diem %nick $calc($coidiem(Diem,%nick) + (%tiendat * 7))
          .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  04ThÃ¥Â´ng 04,01$ $+ $tien($calc(%tiendat * 7)) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick)) $+  Ban Ã°uÂ’oÂ’c nhÃ¢n BaÂ²y sÃ´Â´ tiÃª`n Ã°Ã¥t cuÂ’oÂ’c
        }
        else {
          ghidiem Diem %nick $calc($coidiem(Diem,%nick) + (%tiendat * 2))
          .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  04ThÃ¥Â´ng 04,01$ $+ $tien($calc(%tiendat * 2)) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick)) $+  Ban Ã°uÂ’oÂ’c nhÃ¢n ÃÃ´i sÃ´Â´ tiÃª`n Ã°Ã¥t cuÂ’oÂ’c
        }
      }
      else {
        ghidiem Diem %nick $calc($coidiem(Diem,%nick) + %tiendat)
        .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  12ÃiÃªÂ²m 04ThÃ¥Â´ng 04,01$ $+ $tien(%tiendat) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
      }
      inc %x 2
    }
    if (%score1 > 21) && (%score.cai1 <= 21) {
      if (%score1 > 27) {
        ghidiem Diem %nick $calc($coidiem(Diem,%nick) - (%tiendat * 2))
        .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  12ÃiÃªÂ²m (LÃ³Â’n hoÂ’n 27 - Ban bi Phat gÃ¢Â´p Ã°Ã´i) 03Thua 04,01$ $+ $tien($calc(%tiendat * 2)) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
      }
      else {
        ghidiem Diem %nick $calc($coidiem(Diem,%nick) - %tiendat)
        .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  12ÃiÃªÂ²m 03Thua 04,01$ $+ $tien(%tiendat) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
      }
      inc %x 2
    }
    if (%score1 < %score.cai1) && (%score1 <= 21) && (%score.cai1 <= 21) {
      ghidiem Diem %nick $calc($coidiem(Diem,%nick) - %tiendat)
      .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  12ÃiÃªÂ²m 03Thua 04,01$ $+ $tien(%tiendat) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
      inc %x 2
    }
    if (%score1 > 21) && (%score.cai1 > 21) {
      if (%score1 > 27) {
        ghidiem Diem %nick $calc($coidiem(Diem,%nick) - (%tiendat * 2))
        .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  12ÃiÃªÂ²m (LÃ³Â’n hoÂ’n 27 - Ban bi Phat gÃ¢Â´p Ã°Ã´i) 03Thua 04,01$ $+ $tien($calc(%tiendat * 2)) $+  12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
      }
      else {
        .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  12ÃiÃªÂ²m 13HÃ²a 12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
        inc %x 2
      }
    }
    if (%score1 = %score.cai1) {
      .timerblackjack $+ %i 1 %x describeVC %r 4 $+ %nick 12ÃuÂ’oÂ’.c 08,01 %score  12ÃiÃªÂ²m 13HÃ²a 12TÃ i SaÂ²n 04,01$ $+ $tien($coidiem(Diem,%nick))
      inc %x 2
    }
    :next1
    inc %i
  }
  ShowBaiXiDachBOT
  if (%blackjack.nickwins != $null) { .timer 1 %x describeVC %r 3ÃÃªÂ´m tiÃª`n traÂ² cho cÃ¡c nick Ã°Ã£ thÃ¥Â´ng lÃ :4 %blackjack.nickwins }
  else if (%blackjack.nickwins == $null) && (%score.cai1 <= 21) { .timer 1 %x describeVC %r 12VÃ¡n nÃ y khÃ´ng ai thÃ¥Â´ng 4BOT12 caÂ² chiÂ² cÃ³ thua vÃ³Â’i hÃ²a mÃ  thÃ´i, CÃ¡i hÃ´Â´t sÃ²ng nha }
  else if (%blackjack.nickwins == $null) && (%score.cai1 > 21) { .timer 1 %x describeVC %r 12HeHe caÂ² Ã°Ã¡m cÃ¹ng bi 4BURSTED }
  inc %x 2
  .timerblackjack14 1 %x describeVC %r 12Ta Mang Bao TÃ´.i LÃ´~i Â¤ NguÂ’Ã²Â’i OÂ’i Ta ÃÃ¢u CÃ²n Chi Â¤Â¤Â¤ Xin HÃ£y TrÃ¡nh Xa KiÃªÂ´p 1,4 ÃoÂ² 4,1 Ãen 
  inc %x 2

  ;if (%blackjack.nickwins != $null) { .timerblackjack11 1 2 describeVC %r 0,14Â¤11,1Bot0,14Â¤0,4Â¤9,1 $+ $me $+ 0,4Â¤ | .timerblackjack12 1 3 describeVC %r 3BÃ i CuÂ²a4 Bot3:7 %cards.cai 3ÃiÃªÂ²m:7 %score.cai | .timerblackjack13 1 5 describeVC %r 3CÃ¡c nick Ã°Ã£ thÃ¥Â´ng lÃ :4 %blackjack.nickwins | .timerblackjack14 1 %x describeVC %r 12Ta Mang Bao TÃ´.i LÃ´~i NguÂ’Ã²Â’i OÂ’i Ta ÃÃ¢u CÃ²n Chi ... Xin HÃ£y TrÃ¡nh Xa KiÃªÂ´p 1,4 ÃoÂ² 4,1 Ãen  }
  ;else if (%blackjack.nickwins == $null) && (%score.cai <= 21) { .timerblackjack11 1 2 describeVC %r 0,14Â¤11,1Bot0,14Â¤0,4Â¤9,1 $+ $me $+ 0,4Â¤ | .timerblackjack12 1 3 describeVC %r 3BÃ i CuÂ²a4 Bot3:7 %cards.cai 3ÃiÃªÂ²m:4 %score.cai | .timerblackjack13 1 5 describeVC %r 12VÃ¡n nÃ y khÃ´ng ai thÃ¥Â´ng 4Bot12 caÂ² chiÂ² cÃ³ thua voÂ’i hÃ²a mÃ  thÃ´i, CÃ¡i hÃ´'t sÃ²ng nha! CaÂ²m oÂ’n moi nguÂ’Ã²Â’i Ã°Ã£ uÂ²ng hÃ´. Hehe | .timerblackjack14 1 %x describeVC %r 12Ta Mang Bao TÃ´.i LÃ´~i NguÂ’Ã²Â’i OÂ’i Ta ÃÃ¢u CÃ²n Chi ... Xin HÃ£y TrÃ¡nh Xa KiÃªÂ´p 1,4 ÃoÂ² 4,1 Ãen  }
  ;else if (%blackjack.nickwins == $null) && (%score.cai > 21) { .timerblackjack11 1 2 describeVC %r 0,14Â¤11,1Bot0,14Â¤0,4Â¤9,1 $+ $me $+ 0,4Â¤ | .timerblackjack12 1 3 describeVC %r 3BÃ i CuÂ²a4 Bot3:7 %cards.cai 3ÃiÃªÂ²m:4 %score.cai | .timerblackjack13 1 5 describeVC %r 12HeHe caÂ² Ã°Ã¡m cÃ¹ng bi 4BURSTED | .timerblackjack14 1 %x describeVC %r 12Ta Mang Bao TÃ´.i LÃ´~i NguÂ’Ã²Â’i OÂ’i Ta ÃÃ¢u CÃ²n Chi ... Xin HÃ£y TrÃ¡nh Xa KiÃªÂ´p 1,4 ÃoÂ² 4,1 Ãen  }
  unset %bobai %score* %nick.blackjack* %cards.* %nick.tiendat* %blackjack.thutu %currentplayer %blackjack.nickwins %nicks.blackjack
  set %blackjackplay off
  .timergamez 1 $calc(%x + %quacau) choigame
  .enable #LoDe
}
alias ShowBaiXiDachBOT {
  var %xSXD 0
  ;inc %xSXD 2 3 5 7 9
  .timerblackjack11 1 %xSXD describeVC %r 0,14Â¤11,1Bot0,14Â¤0,4Â¤9,1 $+ $me $+ 0,4Â¤ | inc %xSXD 3
  if ($numtok(%cards.cai,32) == 2) { .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 %cards.cai 12ÃuÂ’oÂ’.c 08,01 %score.cai  12ÃiÃªÂ²m | inc %xSXD 3
  .timer 1 %xSXD describeVC %r 12Bot Ã°uÂ² tÃ¢Â²y rÃ´Ã¬, ngu gÃ¬ kÃ©o nuÂ’Ã£! Khui bÃ i thÃ´i | inc %xSXD 3 }
  elseif ($numtok(%cards.cai,32) == 3) { .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 $gettok(%cards.cai,1-2,32) 12ÃuÂ’oÂ’.c 08,01 $tinhdiemblackjack($gettok(%cards.cai,1-2,32))  12ÃiÃªÂ²m | inc %xSXD 3
    .timer 1 %xSXD describeVC %r 12Bot chuÂ’a Ã°uÂ² tÃ¢Â²y! KÃ©o thÃªm 1 cÃ¢y nuÂ’Ã£ nhÃ©... | inc %xSXD 3 | .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 %cards.cai 12ÃuÂ’oÂ’.c 08,01 %score.cai  12ÃiÃªÂ²m | inc %xSXD 3
    if (%score.cai > 21) && (%score.cai isnum) { .timer 1 %xSXD describeVC %r 12Bot quÃ¡ tuÃ´Â²i rÃ´Ã¬! ^_^ | inc %xSXD 3 }
    elseif (%cards.cai == 777) { .timer 1 %xSXD describeVC %r 12Sao khÃ´ng ai trÃºng Tam ThÃ¢Â´t mÃ  vÃ o Bot thÃªÂ´ nÃ y ? }
    else { .timer 1 %xSXD describeVC %r 12Bot Ã°uÂ² tÃ¢Â²y rÃ´Ã¬, ngu gÃ¬ kÃ©o nuÂ’Ã£! Khui bÃ i thÃ´i | inc %xSXD 3 }
  }
  elseif ($numtok(%cards.cai,32) == 4) { .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 $gettok(%cards.cai,1-2,32) 12ÃuÂ’oÂ’.c 08,01 $tinhdiemblackjack($gettok(%cards.cai,1-2,32))  12ÃiÃªÂ²m | inc %xSXD 3
    .timer 1 %xSXD describeVC %r 12Bot chuÂ’a Ã°uÂ² tÃ¢Â²y! KÃ©o thÃªm 1 cÃ¢y nuÂ’Ã£ nhÃ©... | inc %xSXD 3 | .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 $gettok(%cards.cai,1-3,32) 12ÃuÂ’oÂ’.c 08,01 $tinhdiemblackjack($gettok(%cards.cai,1-3,32))  12ÃiÃªÂ²m | inc %xSXD 3
    .timer 1 %xSXD describeVC %r 12Bot chuÂ’a Ã°uÂ² tÃ¢Â²y! KÃ©o thÃªm 1 cÃ¢y nuÂ’Ã£ nhÃ©... | inc %xSXD 3 | .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 %cards.cai 12ÃuÂ’oÂ’.c 08,01 %score.cai  12ÃiÃªÂ²m | inc %xSXD 3
    if (%score.cai > 21) { .timer 1 %xSXD describeVC %r 12Bot quÃ¡ tuÃ´Â²i rÃ´Ã¬! ^_^ | inc %xSXD 3 }
    else { .timer 1 %xSXD describeVC %r 12Bot Ã°uÂ² tÃ¢Â²y rÃ´Ã¬, ngu gÃ¬ kÃ©o nuÂ’Ã£! Khui bÃ i thÃ´i | inc %xSXD 3 }
  }
  elseif ($numtok(%cards.cai,32) == 5) { .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 $gettok(%cards.cai,1-2,32) 12ÃuÂ’oÂ’.c 08,01 $tinhdiemblackjack($gettok(%cards.cai,1-2,32))  12ÃiÃªÂ²m | inc %xSXD 3
    .timer 1 %xSXD describeVC %r 12Bot chuÂ’a Ã°uÂ² tÃ¢Â²y! KÃ©o thÃªm 1 cÃ¢y nuÂ’Ã£ nhÃ©... | inc %xSXD 3 | .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 $gettok(%cards.cai,1-3,32) 12ÃuÂ’oÂ’.c 08,01 $tinhdiemblackjack($gettok(%cards.cai,1-3,32))  12ÃiÃªÂ²m | inc %xSXD 3
    .timer 1 %xSXD describeVC %r 12Bot chuÂ’a Ã°uÂ² tÃ¢Â²y! KÃ©o thÃªm 1 cÃ¢y nuÂ’Ã£ nhÃ©... | inc %xSXD 3 | .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 $gettok(%cards.cai,1-4,32) 12ÃuÂ’oÂ’.c 08,01 $tinhdiemblackjack($gettok(%cards.cai,1-4,32))  12ÃiÃªÂ²m | inc %xSXD 3
    .timer 1 %xSXD describeVC %r 12Bot chuÂ’a Ã°uÂ² tÃ¢Â²y! KÃ©o thÃªm 1 cÃ¢y nuÂ’Ã£ nhÃ©... | inc %xSXD 3 | .timer 1 %xSXD describeVC %r 3BÃ i CuÂ²a4 Bot3:7 %cards.cai 12ÃuÂ’oÂ’.c 08,01 %score.cai  12ÃiÃªÂ²m | inc %xSXD 3
    if (%score.cai == Ngu~ Linh) { .timer 1 %xSXD describeVC %r 12Bot Ngu~ Linh rÃ´Ã¬ nhÃ©. Gom sÃ²ng thÃ´i ^_^ | inc %xSXD 3 }
    else { .timer 1 %xSXD describeVC %r 12Bot Ngu~ LuÃ´n rÃ´Ã¬! | inc %xSXD 3 }
  }
}
