on 1:TEXT:!gamenhom:%r: {
  ;if ($gettok($readini(hethong\login.ini,dangnhap,$nick),1,32) == $null) { noticeVC $nick 4,01 $nick 9,01chu¬ía √ê√•ng k√Ω , √ê√™¬≤ √∞√•ng k√Ω cho¬íi game , 8G√µ 11/msg $me 4!register <pass1> <pass2> | .ignore -u5 $nick }
  ;if ($gettok($readini(hethong\login.ini,dangnhap,$nick),1,32) != $null) && ($level($nick) < 3) { noticeVC $nick 4,01 $+ $nick 9,01Chu¬ía Login , 13/msg $me !identify <pass> , 9√ê√™¬≤ cho¬íi Games | .ignore -u5 $nick }
  if (%gamenhom.dangchoi == on) { noticeVC $nick 3√êang cho¬íi $DenDo(Game Nh√≥m) 3ho√•.c l√† chu¬ía c√≥ $DenDo(Game Nh√≥m) 3 b√¢y gi√≤¬í. Ban ch√≤¬í nh√©. | .ignore -u20 $nick | .close -m $nick | halt }
  else {
    inc %gamenhom.thutu 1
    writeini -n hethong\GameNhom.ini Gamenhom %gamenhom.thutu $nick
    describeVC %r 13 $+ $nick 12√∞√£ tham gia tr√≤ cho¬íi $DenDo(Game Nh√≥m)
    .ignore -u40 $nick 
  }
}
on 1:TEXT:!GameNhom.DatCuoc*:%r: {
  if (($nick == %gamenhom.doitruong.datcuoc) && (%gamenhom.datcuoc == on) && ($2 <= $div($GameNhomDatCuocMax,2)) && ($ChkBet($nick,$2) == True)) {
    describeVC %r 12√ê√¥i tru¬ío¬í¬≤ng4 %gamenhom.doitruong.datcuoc 12√∞√£ √∞√•t cu¬ío¬íc v√°n n√†y l√† 8,1$ $+ $tien($2)
    set %gamenhom.giaithuong $2
    var %iChkGN = 1
    while (%iChkGN <= %gamenhom.thutu) {
      if ($ChkBet($coidulieu5(GameNhom,%iChkGN),$2) == False) {
        .timer 1 1 describeVC %r 12Xin l√¥~i4 $nick 12!!! T√†i sa¬≤n cu¬≤a3 $coidulieu5(GameNhom,%iChkGN) 12kh√¥ng √∞u¬≤ √∞√™¬≤ tham gia cu¬ío¬íc. M√≤¬íi ban √∞√•t cu¬ío¬íc lai ...
        .timerdatcuocgamenhom4 1 30 choigamenhom
        set %iChkGN $calc(%gamenhom.thutu + 1)
        unset %gamenhom.giaithuong | halt
      }
      inc %iChkGN
    }
    if (%gamenhom.giaithuong != $null) {
      .timer 1 3 set %gamenhom.dongy on
      .timer 1 3 describeVC %r 0,1√ê√¥i tru¬ío¬í¬≤ng4 %gamenhom.doitruong.traloi 0c√≥ √ê√¥`ng √Ω kh√¥ng? N√™√∫ 4√ê√¥`ng √Ω 0g√µ: 8!GameNhom.DongY 0n√™√∫ 4Kh√¥ng √ê√¥`ng √Ω 0g√µ: 8!GameNhom.KhongDongY
      .timer 1 4 describeVC %r 12Ban c√≥ 043003s 12√∞√™¬≤ chon. N√™√∫ ban 4Kh√¥ng √ê√¥`ng √Ω 12ho√•c qu√° 043003s 12bot se~ tu¬í √∞√¥ng nh√¢n cu¬ío¬íc l√† 8,1$ $+ $tien(%gamenhom.tudat)
      .timerdatcuocgamenhom4 1 33 choigamenhom
    }
  }
  ;else { describeVC %r 5Chi¬≤ c√≥ √ê√¥i tru¬ío¬í¬≤ng4 %doitruong.datcuoc 5m√≥¬íi √∞u¬ío¬íc tham gia √∞√•t cu¬ío¬íc }
}
on 1:TEXT:!GameNhom.*DongY*:%r: {
  if ($nick == %gamenhom.doitruong.traloi) && (%gamenhom.dongy == on) {
    if ($1 == !GameNhom.DongY) {
      .timer 1 1 describeVC %r 12√ê√¥i tru¬ío¬í¬≤ng4 $nick 12√∞√£ 4√ê√¥`ng √Ω 12v√≥¬íi s√¥¬¥ ti√™`n cu¬ío¬íc 8,1$ $+ $tien(%gamenhom.giaithuong) $+ 12. Ch√∫ng ta se~ b√•¬¥t √∞√¢√π trong v√†i gi√¢y nu¬í√£ ...
      .timerdatcuocgamenhom4 1 5 choigamenhom
    }
    elseif ($1 == !GameNhom.KhongDongY) {
      .timer 1 3 set %gamenhom.giaithuong %gamenhom.tudat
      .timer 1 1 describeVC %r 12√ê√¥i tru¬ío¬í¬≤ng4 $nick 12√∞√£ 4Kh√¥ng √ê√¥`ng √Ω 12v√≥¬íi s√¥¬¥ ti√™`n cu¬ío¬íc 8,1$ $+ $tien(%gamenhom.giaithuong) $+ 12. Ch√∫ng ta se~ b√•¬¥t √∞√¢√π trong v√†i gi√¢y nu¬í√£ ...
      .timerdatcuocgamenhom4 1 5 choigamenhom
    }
    unset %gamenhom.dongy
  }
}
alias gamenhom.datcuoc {
  set %gamenhom.doitruong.datcuoc $gettok($gettok(%nhom1,1,32) $gettok(%nhom2,1,32),$r(1,2),32)
  set %gamenhom.doitruong.traloi $remtok($gettok(%nhom1,1,32) $gettok(%nhom2,1,32),%gamenhom.doitruong.datcuoc,1,32)
  set %gamenhom.datcuoc on
  ;set %gamenhom.tudat $r(1,9) $+ $str(0,8)
  set %gamenhom.tudat $r(1,$left($div($GameNhomDatCuocMax,2),1)) $+ $str(0,$calc($len($div($GameNhomDatCuocMax,2)) - 1))
  .timerdatcuocgamenhom1 1 1 describeVC %r 12Bot $me se~ chon m√¥t trong hai √ê√¥i Tru¬ío¬í¬≤ng cu¬≤a hai √∞√¥i ( $+ $gettok(%nhom1,1,32) ho√•c $gettok(%nhom2,1,32) $+ ) √∞√™¬≤ tham gia √ê√•t Cu¬ío¬íc.
  .timerdatcuocgamenhom2 1 3 describeVC %r 0,1 √ê√¥i tru¬ío¬í¬≤ng √∞u¬ío¬íc chon l√†:9 %gamenhom.doitruong.datcuoc 0M√≤¬íi ban g√µ 4!GameNhom.DatCuoc 8<s√¥¬¥ ti√™`n> 0√∞√™¬≤ √∞√•t cu¬ío¬íc.
  .timerdatcuocgamenhom3 1 4 describeVC %r 12Ban c√≥ 043003s 12√∞√™¬≤ √∞√•t cu¬ío¬íc. N√™√∫ ban kh√¥ng √∞√•t cu¬ío¬íc, bot se~ tu¬í √∞√¥ng nh√¢n cu¬ío¬íc l√† 8,1$ $+ $tien(%gamenhom.tudat)
  .timerdatcuocgamenhom5 1 5 describeVC %r 12S√¥¬¥ ti√™`n c√≥ th√™¬≤ √∞√•t cu¬ío¬íc l√≥¬ín nh√¢¬¥t l√† 8,1$ $+ $tien($div($GameNhomDatCuocMax,2))
  .timerdatcuocgamenhom4 1 34 choigamenhom
}
on 1:text:*:%r: {
  if (%gamenhom == on) {
    if ($len($1-) == 0) return
    ;if (($DA.TL($1-) == $DA.TL(%goiy3)) || ($DA.TL($1-) == $DA.TL(%goiy2)) || ($1- == $unicode(%goiy2)) || ($DA.TL($viqr($1-)) == $DA.TL(%goiy2)) ) && ($DA.TL($1-) != $null ) && (%goiy2 != $null) {
    if ($lower($1-) == $lower(%goiy2)) && (%goiy2 != $null) {
      if ( $nick == $coidulieu5(GameNhom,1) || $nick == $coidulieu5(GameNhom,3) || $nick == $coidulieu5(GameNhom,5) || $nick == $coidulieu5(GameNhom,7)   || $nick == $coidulieu5(GameNhom,9)  || $nick == $coidulieu5(GameNhom,11)  || $nick == $coidulieu5(GameNhom,13)   || $nick == $coidulieu5(GameNhom,15)  || $nick == $coidulieu5(GameNhom,17)   || $nick == $coidulieu5(GameNhom,19) ) {
        inc %nhom1.thang 1
        ghidiem diem $nick $int($calc($coidiem(diem,$nick) + %averageDiem))
        .timera1 off
        ;$iif($r(0,1)=0,3√∞√°p √°n √∞√∫ng4,3tra¬≤ l√≤¬íi √∞√∫ng4)
        describeVC %r 12Nh√≥m 1:13 $nick $iif($r(0,1) = 0,3√∞√°p √°n √∞√∫ng4,3tra¬≤ l√≤¬íi √∞√∫ng4) %goiy2 12√êi√™¬≤m:4 $tien(%averageDiem) 12T√†i sa¬≤n: 4$ $+ $tien($coidiem(diem,$nick)) $+ . 7K√™¬¥t qua¬≤: 4Nh√≥m 1:13 %nhom1.thang 12-4 Nh√≥m 2:13 %nhom2.thang
        unset %gamenhom.tam. %gamenhom.tam %goiy*
        ;if (%nhom1.thang == %nhom2.thang) describeVC %r Ty¬≤ s√¥¬¥ √∞ang c√¢n b√•`ng. Nh√≥m n√†o se~ vuo.t l√™n tru√≥c. M√≤i c√°c ba.n theo d√µi ti√™¬¥p
        ;if (%nhom1.thang == 1) && (%nhom2.thang == 0) describeVC %r 3Kho¬≤i √∞√¢`u 13Nh√≥m 13 √∞√£ vuo.t l√™n d√¢~n tru√≥c d√¥¬¥i phuong
        ;if (%nhom1.thang == 5) describeVC %r 13Nh√≥m 112 √∞√£ √∞i √∞uo.c nu~a √∞u√≤ng r√¥`i √∞√¢¬¥y. C√¥¬¥ l√™n n√†o c√°c ba.n
        ;if (%nhom1.thang == 8) describeVC %r 13Nh√≥m 112 c√≤n 2 c√¢u nu~a se~ ha. gu.c 13Nh√≥m 2. 12T√•ng t√¥¬¥c l√™n n√®
        ;if (%nhom1.thang == 9) describeVC %r 13Nh√≥m 112 c√≤n vo¬≤n ve.n 1 c√¢u sau c√πng l√† to√†n th√•¬¥ng. Nhanh l√™n n√†o c√°c ba.n
        .timera2 off
        .timera4 off
        .timera3 1 10 choigamenhom
        if ( %nhom1.thang == 10 ) {
          .timera3 off
          .timera4 off
          		  gamenhom.chiatien
          describeVC %r 3Xin ch√∫c m√π¬íng 13Nh√≥m 1:4 %nhom1 3√∞√£ th√•¬¥ng. M√¥~i th√†nh vi√™n trong nh√≥m √∞u¬ío¬í.c thu¬ío¬í¬≤ng 4$ $+ $tien($round($calc((%gamenhom.giaithuong * $numtok(%nhom2,32)) / $numtok(%nhom1,32)),0))
          unset %goiy3 %goiy2
          thuongnhom1 | .timers off | .timera3 off | .timera1 off | timera2 off | halt
          remini hethong\GameNhom.ini Gamenhom
          halt
        }
      }
      if ( $nick == $coidulieu5(GameNhom,2) || $nick == $coidulieu5(GameNhom,4) || $nick == $coidulieu5(GameNhom,6)   || $nick == $coidulieu5(GameNhom,8)   || $nick == $coidulieu5(GameNhom,10)  || $nick == $coidulieu5(GameNhom,12)  || $nick == $coidulieu5(GameNhom,14)   || $nick == $coidulieu5(GameNhom,16)  || $nick == $coidulieu5(GameNhom,18)   || $nick == $coidulieu5(GameNhom,20)) {  
        inc %nhom2.thang 1
        ghidiem diem $nick $int($calc($coidiem(diem,$nick) + %averageDiem))
        .timera1 off
        describeVC %r 12Nh√≥m 2:13 $nick $iif($r(0,1 ) = 0,3√∞√°p √°n √∞√∫ng4,3tra¬≤ l√≤¬íi √∞√∫ng4) %goiy2 12√êi√™¬≤m:4 $tien(%averageDiem) 12T√†i sa¬≤n: 4$ $+ $tien($coidiem(diem,$nick)) $+ . 7K√™¬¥t qua¬≤: 4Nh√≥m 1:13 %nhom1.thang 12-4 Nh√≥m 2:13 %nhom2.thang
        unset %gamenhom.tam. %gamenhom.tam %goiy*
        ;if (%nhom1.thang == %nhom2.thang) describeVC %r Ty¬≤ s√¥¬¥ √∞ang c√¢n b√•`ng. Nh√≥m n√†o se~ vuo.t l√™n tru√≥c. M√≤i c√°c ba.n theo d√µi ti√™¬¥p
        ;if (%nhom1.thang == 0) && (%nhom2.thang == 1) describeVC %r 3Kho¬≤i √∞√¢`u 13Nh√≥m 23 √∞√£ vuo.t l√™n d√¢~n tru√≥c √∞√¥'i phuong
        ;if (%nhom2.thang == 5) describeVC %r 13Nh√≥m 212 √∞√£ √∞i √∞uo.c nu~a √∞u√≤ng r√¥`i √∞√¢¬¥y. C√¥¬¥ l√™n n√†o c√°c ba.n
        ;if (%nhom2.thang == 8) describeVC %r 13Nh√≥m 212 c√≤n 2 c√¢u nu~a se~ ha. gu.c 13Nh√≥m 1. 12T√•ng t√¥¬¥c l√™n n√®
        ;if (%nhom2.thang == 9) describeVC %r 13Nh√≥m 212 c√≤n vo¬≤n ve.n 1 c√¢u sau c√πng l√† to√†n th√•¬¥ng. Nhanh l√™n n√†o c√°c ba.n
        .timera2 off
        .timera4 off
        .timera3 1 10 choigamenhom
        if ( %nhom2.thang == 10 ) {
          .timera3 off
          .timera4 off
          		  gamenhom.chiatien
          .timer 1 1 describeVC %r 3Xin ch√∫c m√π¬íng 13Nh√≥m 2:4 %nhom2 3√∞√£ th√•¬¥ng. M√¥~i th√†nh vi√™n trong nh√≥m √∞u¬ío¬í.c thu¬ío¬í¬≤ng 4$ $+ $tien($round($calc((%gamenhom.giaithuong * $numtok(%nhom1,32)) / $numtok(%nhom2,32)),0))
          unset %goiy3 %goiy2
          thuongnhom2 | .timers off | .timera3 off | .timera1 off | timera2 off | halt
          remini hethong\GameNhom.ini Gamenhom
          halt 
        }
      }
    }
  }
}
alias GameNhom {
  %gamenhom = on
  remini hethong\GameNhom.ini Gamenhom 
  unset %nhom* %gamenhom.*
  set %gamenhom.dangchoi off | set %gamenhom.. $r(1,10) | %nhom1.thang = 0 | %nhom2.thang = 0
  describeVC %r 3T√≥¬íi gi√≤¬í cho¬íi $DenDo(Game Nh√≥m) 3r√¥√¨! C√°c ban c√≥4 40 3gi√¢y g√µ13 !GameNhom 3√∞√™¬≤ tham gia thi √∞√¢√∫ $DenDo(Game Nh√≥m)
  .timergamenhom1 1 40 describeVC %r 12H√™¬¥t gi√≤¬í tham gia $DenDo(Game Nh√≥m) 12Ban t√¥¬≤ ch√∫¬íc se~ b√¥¬¥c th√•m chia √∞√¥i cho c√°c th√†nh vi√™n
  .timergamenhom2 1 40 set %gamenhom.dangchoi on
  .timergamenhom3 1 42 xepgamenhom
  .timergamenhom4 1 45 kiemtragamenhom
  ;.timergamenhom5 1 46 gamenhom.chiatien
  .timergamenhom6 1 48 gamenhom.datcuoc
}
alias xepgamenhom {
  set %gamenhom on
  if ($lines(hethong\GameNhom.ini) >= 3) {
    set %nhom1 $coidulieu5(GameNhom,1) $coidulieu5(GameNhom,3) $coidulieu5(GameNhom,5) $coidulieu5(GameNhom,7) $coidulieu5(GameNhom,9) $coidulieu5(GameNhom,11) $coidulieu5(GameNhom,13) $coidulieu5(GameNhom,15) $coidulieu5(GameNhom,17) $coidulieu5(GameNhom,19) 
    set %nhom2 $coidulieu5(GameNhom,2) $coidulieu5(GameNhom,4) $coidulieu5(GameNhom,6) $coidulieu5(GameNhom,8) $coidulieu5(GameNhom,10) $coidulieu5(GameNhom,12) $coidulieu5(GameNhom,14) $coidulieu5(GameNhom,16) $coidulieu5(GameNhom,18) $coidulieu5(GameNhom,20)
    ;set %gamenhom.giaithuong $readini(dulieu\tienthuong.ini,TienThuong,%gamenhom..)
    .timergamenhomx1 1 1 describeVC %r $DenDo(Game Nh√≥m 1:) 4 %nhom1
    .timergamenhomx2 1 2 describeVC %r $DenDo(Game Nh√≥m 2:) 4 %nhom2
    trudiemgame %gamenhom.giaithuong
  }
  else kiemtragamenhom
}
alias kiemtragamenhom {
  if ($lines(hethong\GameNhom.ini) < 3) {
    .timers off
    %gamenhom.dangchoi = on
    describeVC %r 12Kh√¥ng √∞u¬≤ ngu¬í√≤¬íi tham gia $DenDo(Game Nh√≥m) 12n√™n d√π¬íng o¬í¬≤ √∞√¢y
    remini hethong\GameNhom.ini Gamenhom
    .timersangcau 1 %quacau choigame
  }
}
alias gamenhom.chiatien {
  %gamenhom.tongnguoi1 = $numtok(%nhom1,32)
  %gamenhom.tongnguoi2 = $numtok(%nhom2,32)
  %gamenhom.tienthuong1 = $round($calc((%gamenhom.giaithuong * %gamenhom.tongnguoi2) / %gamenhom.tongnguoi1),0)
  %gamenhom.tienthuong2 = $round($calc((%gamenhom.giaithuong * %gamenhom.tongnguoi1) / %gamenhom.tongnguoi2),0)
  ;$round($calc((%gamenhom.giaithuong * $numtok(%nhom1,32)) / $numtok(%nhom2,32)),0)
}
alias choigamenhom {
  %gamenhom = on
  ;unset %gamenhom.dongy %gamenhom.datcuoc
  .ignore -r
  inc %gamenhom.thutuhoi 1
  if (%gamenhom.giaithuong == $null) { set %gamenhom.giaithuong %gamenhom.tudat }
  if (%gamenhom.dongy != $null) || (%gamenhom.datcuoc != $null) {
    describeVC %r 12Hai nh√≥m se~ thi √∞√¢√∫ trong4 20 12c√¢u Nh√≥m n√†o tra¬≤ l√≤¬íi 0410 12c√¢u tru¬í√≥¬íc se~ chi√™¬¥n th√•¬¥ng
    describeVC %r 12S√¥¬¥ ti√™`n cu¬ío¬íc cu¬≤a v√°n n√†y l√† 8,1$ $+ $tien(%gamenhom.giaithuong) $+ 12.
    unset %gamenhom.dongy %gamenhom.datcuoc
  }

  ;inc %cauhoi.thutuhoi 1
  ;if ($coidulieu(Chung,Cauhoitudong) == 0) { inc %cauhoi.thutuhoi 1 | %cauhoi.tam = $read -l $+ %cauhoi.thutuhoi cauhoi\gamenhom.ini }
  ;else { %cauhoi.thutuhoi = $r(1,$lines(cauhoi\gamenhom.ini)) | %cauhoi.tam = $read -l $+ %cauhoi.thutuhoi cauhoi\gamenhom.ini }
  set %cauhoi.tam $read(cauhoi\gamenhom.ini)

  %cauhoi. = $uw(%cauhoi.tam,1,*)

  if (%gamenhom.thutuhoi >= 21 ) { nghichoi | halt }

  if (%nhom1 == $null) && (%nhom2 == $null) { 
    describeVC %r 3Kh√¥ng c√≥ ai tham gia $DenDo(Game Nh√≥m) 3ca¬≤ n√™n d√π¬íng cu√¥c cho¬íi o¬í¬≤ √∞√¢y
    .timera1 off | .timera2 off | .timers off | unset %cauhoi. %cauhoi.tam %goiy*
    .timertieptuc 1 %quacau choigame | halt
  }
  if (%nhom1 == $null) { 
    describeVC %r 13Nh√≥m 1 3kh√¥ng c√≥ ai ca¬≤ n√™n d√π¬íng cu√¥c cho¬íi o¬í¬≤ √∞√¢y
    .timera1 off | .timera2 off | .timers off | unset %cauhoi. %cauhoi.tam %goiy*
    remini hethong\GameNhom.ini Gamenhom
    .timertieptuc 1 %quacau choigame | halt
  }
  if (%nhom2 == $null) { 
    describeVC %r 13Nh√≥m 2 3kh√¥ng c√≥ ai ca¬≤ n√™n d√π¬íng cu√¥c cho¬íi o¬í¬≤ √∞√¢y
    .timera1 off | .timera2 off | .timers off | unset %cauhoi. %cauhoi.tam %goiy*
    remini hethong\GameNhom.ini Gamenhom
    .timertieptuc 1 %quacau choigame | halt
  }
  describeVC %r 2=-=-=-=-=-=3¬§4¬í12¬§3¬í4¬§12¬í3¬§2[ $DenDo(Game Nh√≥m) 12C√¢u 04 $+ %gamenhom.thutuhoi 2]3¬§12¬í4¬§3¬í12¬§4¬í3¬§2=-=-=-=-=-=
  %cauhoi.sehoi = $DenDo(Game Nh√≥m) $+ $InsertSymbol(0,$replace(%cauhoi.,_,*)) )
  describeVC %r %cauhoi.sehoi
  %goiy2 = $uw(%cauhoi.tam,2,*)
  %goiy3 = $uw(%cauhoi.tam,3,*)
  ;notice %r.master 4√ê√°p √°n:12 %goiy2 $+($chr(40),%goiy3,$chr(41))
  notice %r.master 4√ê√°p √°n:12 %goiy2

  %goiy = $replace($uw(%cauhoi.tam,2,*),a,*,b,*,c,*,d,*,e,*,f,*,g,*,h,*,i,*,j,*,k,*,l,*,m,*,n,*,o,*,p,*,q,*,r,*,s,*,t,*,u,*,v,*,w,*,x,*,y,*,z,*,1,*,2,*,3,*,4,*,5,*,6,*,7,*,8,*,9,*,0,*) 
  %goiy.2 = $replace(%goiy2,b,*,c,*,d,*,f,*,g,*,h,*,j,*,k,*,l,*,m,*,n,*,p,*,q,*,r,*,s,*,t,*,v,*,w,*,x,*,y,*,z,*,1,*,2,*,3,*,4,*,5,*,6,*,7,*,8,*,9,*,0,*) 
  %goiy.3 = $left(%goiy2,3)
  .timera1 1 3 describeVC %r 3C√°c ban c√≥ 0430s 3√ê√™¬≤ tra¬≤ l√≤¬íi c√¢u ho¬≤i n√†y
  .timera4 1 45 hetgio
}
alias hetgio {
  describeVC %r 13H√™¬¥t gi√≤¬í. Ch√∫ng ta sang c√¢u k√™¬¥ ti√™¬¥p nh√©
  .timera5 1 %quacau choigamenhom
  unset %gamenhom.tam. %gamenhom.tam %goiy*
}
alias nghichoi {
  %gamenhom.dangchoi = on
  describeVC %r 3H√™¬¥t 20 c√¢u! Kh√¥ng c√≥ nh√≥m n√†o th√•¬¥ng n√™n du¬í`ng o¬í¬≤ √∞√¢y...
  .timertieptuc 1 %quacau choigame | halt
}
alias thuongnhom1 {
  gamenhom.chiatien
  %diem.cosan1 = $coidiem(Diem,$coidulieu5(GameNhom,1)) | inc %diem.cosan1 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,1) %diem.cosan1
  %diem.cosan2 = $coidiem(Diem,$coidulieu5(GameNhom,2)) | dec %diem.cosan2 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,2) %diem.cosan2
  if ($coidulieu5(GameNhom,3) == $null) { goto tieptuc }
  else { %diem.cosan3 = $coidiem(Diem,$coidulieu5(GameNhom,3)) | inc %diem.cosan3 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,3) %diem.cosan3 }
  if ($coidulieu5(GameNhom,4) == $null) { goto tieptuc }
  else { %diem.cosan4 = $coidiem(Diem,$coidulieu5(GameNhom,4)) | dec %diem.cosan4 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,4) %diem.cosan4 }
  if ($coidulieu5(GameNhom,5) == $null) { goto tieptuc }
  else { %diem.cosan5 = $coidiem(Diem,$coidulieu5(GameNhom,5)) | inc %diem.cosan5 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,5) %diem.cosan5 }
  if ($coidulieu5(GameNhom,6) == $null) { goto tieptuc }
  else { %diem.cosan6 = $coidiem(Diem,$coidulieu5(GameNhom,6)) | dec %diem.cosan6 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,6) %diem.cosan6 }
  if ($coidulieu5(GameNhom,7) == $null) { goto tieptuc }
  else { %diem.cosan7 = $coidiem(Diem,$coidulieu5(GameNhom,7)) | inc %diem.cosan7 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,7) %diem.cosan7 }
  if ($coidulieu5(GameNhom,8) == $null) { goto tieptuc }
  else { %diem.cosan8 = $coidiem(Diem,$coidulieu5(GameNhom,8)) | dec %diem.cosan4 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,8) %diem.cosan8 }
  if ($coidulieu5(GameNhom,9) == $null) { goto tieptuc }
  else { %diem.cosan9 = $coidiem(Diem,$coidulieu5(GameNhom,9)) | inc %diem.cosan9 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,9) %diem.cosan9 }
  if ($coidulieu5(GameNhom,10) == $null) { goto tieptuc }
  else { %diem.cosan10 = $coidiem(Diem,$coidulieu5(GameNhom,10)) | dec %diem.cosan10 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,10) %diem.cosan10 }
  if ($coidulieu5(GameNhom,11) == $null) { goto tieptuc }
  else { %diem.cosan11 = $coidiem(Diem,$coidulieu5(GameNhom,11)) | inc %diem.cosan11 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,11) %diem.cosan11 }
  if ($coidulieu5(GameNhom,12) == $null) { goto tieptuc }
  else { %diem.cosan12 = $coidiem(Diem,$coidulieu5(GameNhom,12)) | dec %diem.cosan12 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,12) %diem.cosan12 }
  if ($coidulieu5(GameNhom,13) == $null) { goto tieptuc }
  else { %diem.cosan13 = $coidiem(Diem,$coidulieu5(GameNhom,13)) | inc %diem.cosan13 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,13) %diem.cosan13 }
  if ($coidulieu5(GameNhom,14) == $null) { goto tieptuc }
  else { %diem.cosan14 = $coidiem(Diem,$coidulieu5(GameNhom,14)) | dec %diem.cosan14 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,14) %diem.cosan14 }
  if ($coidulieu5(GameNhom,15) == $null) { goto tieptuc }
  else { %diem.cosan15 = $coidiem(Diem,$coidulieu5(GameNhom,15)) | inc %diem.cosan15 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,15) %diem.cosan15 }
  if ($coidulieu5(GameNhom,16) == $null) { goto tieptuc }
  else { %diem.cosan16 = $coidiem(Diem,$coidulieu5(GameNhom,16)) | dec %diem.cosan16 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,16) %diem.cosan16 }
  if ($coidulieu5(GameNhom,17) == $null) { goto tieptuc }
  else { %diem.cosan17 = $coidiem(Diem,$coidulieu5(GameNhom,17)) | inc %diem.cosan17 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,17) %diem.cosan17 }
  if ($coidulieu5(GameNhom,18) == $null) { goto tieptuc }
  else { %diem.cosan18 = $coidiem(Diem,$coidulieu5(GameNhom,18)) | dec %diem.cosan18 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,18) %diem.cosan18 }
  if ($coidulieu5(GameNhom,19) == $null) { goto tieptuc }
  else { %diem.cosan19 = $coidiem(Diem,$coidulieu5(GameNhom,19)) | inc %diem.cosan19 %gamenhom.tienthuong1 | ghidiem Diem $coidulieu5(GameNhom,19) %diem.cosan19 }
  if ($coidulieu5(GameNhom,20) == $null) { goto tieptuc }
  else { %diem.cosan20 = $coidiem(Diem,$coidulieu5(GameNhom,20)) | dec %diem.cosan20 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,20) %diem.cosan20 }
  :tieptuc
  set %gamenhom off | unset %nhom* %gamenhom.tienthuong* %gamenhom.tongnguoi* %goiy*
  remini hethong\gamenhom.ini Gamenhom
  %gamenhom.dangchoi = on
  .timertieptuc 1 %quacau choigame | halt
}
alias thuongnhom2 {
  gamenhom.chiatien
  %diem.cosan2 = $coidiem(Diem,$coidulieu5(GameNhom,2)) | inc %diem.cosan2 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,2) %diem.cosan2
  %diem.cosan1 = $coidiem(Diem,$coidulieu5(GameNhom,1)) | dec %diem.cosan1 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,1) %diem.cosan1
  if ($coidulieu5(GameNhom,4) == $null) { goto tieptuc }
  else { %diem.cosan4 = $coidiem(Diem,$coidulieu5(GameNhom,4)) | inc %diem.cosan4 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,4) %diem.cosan4 }
  if ($coidulieu5(GameNhom,3) == $null) { goto tieptuc }
  else { %diem.cosan3 = $coidiem(Diem,$coidulieu5(GameNhom,3)) | dec %diem.cosan3 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,3) %diem.cosan3 }
  if ($coidulieu5(GameNhom,6) == $null) { goto tieptuc }
  else { %diem.cosan6 = $coidiem(Diem,$coidulieu5(GameNhom,6)) | inc %diem.cosan6 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,6) %diem.cosan6 }
  if ($coidulieu5(GameNhom,5) == $null) { goto tieptuc }
  else { %diem.cosan5 = $coidiem(Diem,$coidulieu5(GameNhom,5)) | dec %diem.cosan5 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,5) %diem.cosan5 }
  if ($coidulieu5(GameNhom,8) == $null) { goto tieptuc }
  else { %diem.cosan8 = $coidiem(Diem,$coidulieu5(GameNhom,8)) | inc %diem.cosan8 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,8) %diem.cosan8 }
  if ($coidulieu5(GameNhom,7) == $null) { goto tieptuc }
  else { %diem.cosan7 = $coidiem(Diem,$coidulieu5(GameNhom,7)) | dec %diem.cosan7 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,7) %diem.cosan7 }
  if ($coidulieu5(GameNhom,10) == $null) { goto tieptuc }
  else { %diem.cosan10 = $coidiem(Diem,$coidulieu5(GameNhom,10)) | inc %diem.cosan10 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,10) %diem.cosan10 }
  if ($coidulieu5(GameNhom,9) == $null) { goto tieptuc }
  else { %diem.cosan9 = $coidiem(Diem,$coidulieu5(GameNhom,9)) | dec %diem.cosan9 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,9) %diem.cosan9 }
  if ($coidulieu5(GameNhom,12) == $null) { goto tieptuc }
  else { %diem.cosan12 = $coidiem(Diem,$coidulieu5(GameNhom,12)) | inc %diem.cosan12 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,12) %diem.cosan12 }
  if ($coidulieu5(GameNhom,11) == $null) { goto tieptuc }
  else { %diem.cosan11 = $coidiem(Diem,$coidulieu5(GameNhom,11)) | dec %diem.cosan11 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,11) %diem.cosan3 }
  if ($coidulieu5(GameNhom,14) == $null) { goto tieptuc }
  else { %diem.cosan14 = $coidiem(Diem,$coidulieu5(GameNhom,14)) | inc %diem.cosan14 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,14) %diem.cosan14 }
  if ($coidulieu5(GameNhom,13) == $null) { goto tieptuc }
  else { %diem.cosan13 = $coidiem(Diem,$coidulieu5(GameNhom,13)) | dec %diem.cosan13 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,13) %diem.cosan13 }
  if ($coidulieu5(GameNhom,16) == $null) { goto tieptuc }
  else { %diem.cosan16 = $coidiem(Diem,$coidulieu5(GameNhom,16)) | inc %diem.cosan16 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,16) %diem.cosan16 }
  if ($coidulieu5(GameNhom,15) == $null) { goto tieptuc }
  else { %diem.cosan15 = $coidiem(Diem,$coidulieu5(GameNhom,15)) | dec %diem.cosan15 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,15) %diem.cosan15 }
  if ($coidulieu5(GameNhom,18) == $null) { goto tieptuc }
  else { %diem.cosan18 = $coidiem(Diem,$coidulieu5(GameNhom,18)) | inc %diem.cosan18 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,18) %diem.cosan18 }
  if ($coidulieu5(GameNhom,17) == $null) { goto tieptuc }
  else { %diem.cosan17 = $coidiem(Diem,$coidulieu5(GameNhom,17)) | dec %diem.cosan17 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,17) %diem.cosan17 }
  if ($coidulieu5(GameNhom,20) == $null) { goto tieptuc }
  else { %diem.cosan20 = $coidiem(Diem,$coidulieu5(GameNhom,20)) | inc %diem.cosan20 %gamenhom.tienthuong2 | ghidiem Diem $coidulieu5(GameNhom,20) %diem.cosan20 }
  if ($coidulieu5(GameNhom,19) == $null) { goto tieptuc }
  else { %diem.cosan19 = $coidiem(Diem,$coidulieu5(GameNhom,19)) | dec %diem.cosan19 %gamenhom.giaithuong | ghidiem Diem $coidulieu5(GameNhom,19) %diem.cosan19 }
  :tieptuc
  set %gamenhom off | unset %nhom* %gamenhom.tienthuong* %gamenhom.tongnguoi* %goiy*
  remini hethong\gamenhom.ini Gamenhom
  %gamenhom.dangchoi = on
  .timertieptuc 1 %quacau choigame | halt
}
alias GameNhomDatCuocMax {
  var %iDCM = 1, %nDCM = $lines(hethong\GameNhom.ini), %xDCM = $null
  while (%iDCM <= $calc(%nDCM - 1)) {
    ;echo %r Player %iDCM $+ : $coidulieu5(GameNhom,%iDCM) $coidiem(Diem,$coidulieu5(GameNhom,%iDCM))
    set %xDCM %xDCM $iif($coidiem(Diem,$coidulieu5(GameNhom,%iDCM)) != $null, $coidiem(Diem,$coidulieu5(GameNhom,%iDCM)), 0)
    inc %iDCM
  }
  set %xDCM $sorttok(%xDCM,32,n)
  ;echo %r %xDCM
  return $gettok(%xDCM,1,32)
}
alias DenDo {
  var %iDD = 1, %nDD = $calc($len($1) + 1), %tempDD = 00 $+ $chr(44) $+ $iif($r(0,1) == 0,01,04) $+ $chr(160)
  if (%tempDD == 00,01 $+ $chr(160)) { set %mDD1 00,04 | set %mDD0 00,01 }
  else { set %mDD1 00,01 | set %mDD0 00,04 }
  while (%iDD <= %nDD) {
    if ($mid($1,%iDD,1) == $chr(32)) || ($mid($1,%iDD,1) == $null) { set %tempDD %tempDD $+ %mDD [ $+ [ $mod(%iDD,2) ] ] $+ $chr(160) }
    else { set %tempDD %tempDD $+ %mDD [ $+ [ $mod(%iDD,2) ] ] $+ $mid($1,%iDD,1) }
    inc %iDD
  }
  unset %mDD*
  return $replace(%tempDD,$chr(160),$chr(32)) 
}
