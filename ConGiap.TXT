alias congiap {
  var %GameMini 1,1 00,04C00,01o00,04n01,01 00,04G00,01i00,04Ã¡00,01p03,04 
  .timercongiap1 1 2 describeVC %r 2=-=-=3*4Â°12*3Â°4*12Â°3*2[ $InsertBC(%GameMini) 2]3*12Â°4*3Â°12*4Â°3*2=-=-=
  .timercongiap2 1 3 set %congiap on
  .timercongiap3 1 4 describeVC %r $InsertSymbol(1,GÃµ 8-=[ 11 $+ $InsertBC(!ConGiap) $+  091 09-=> 0912 4TÃ¬Ãªn 8]=- Ã°ÃªÂ² tham gia - 13ChÃº 13Ã½: Ban cÃ³ quyÃª`n Ã°Ã¥t hÃª't 0812 con!!!)
  .timercongiap4 1 5 describeVC %r 3CÃ¡c sÃ´Â´ theo con giÃ¡p -> 1: ChuÃ´t, 2: TrÃ¢u, 3: HÃ´Â², 4: MÃ¨o, 5: RÃ´`ng, 6: RÃ¥Â´n, 7: NguÂ’a, 8: DÃª, 9: KhiÂ², 10: GÃ , 11: ChÃ³, 12: Heo
  .timercongiap5 1 44 set %congiap off
  .timercongiap6 1 44 describeVC %r 4ThÃ²Â’i gian Ã°Ã¥t tÃ¬Ãªn Ã°Ã£ hÃª't ! Sau Ã°Ã¢y lÃ  kÃª't quaÂ² con giÃ¡p
  .timercongiap7 1 45 congiap_play
}
on 1:TEXT:!congiap *:%r: {
  ;if ($gettok($readini(hethong\login.ini,dangnhap,$nick),1,32) == $null) { noticeVC $nick 4,01 $nick 9,01chuÂ’a ÃÃ¥ng kÃ½ , ÃÃªÂ² Ã°Ã¥ng kÃ½ choÂ’i game , 8GÃµ 11/msg $me 4!register <pass1> <pass2> | .ignore -u5 $nick }
  ;if ($gettok($readini(hethong\login.ini,dangnhap,$nick),1,32) != $null) && ($level($nick) < 3) { noticeVC $nick 4,01 $+ $nick 9,01ChuÂ’a Login , 13/msg $me !identify <pass> , 9ÃÃªÂ² choÂ’i Games | .ignore -u5 $nick }
  if ($level($nick) >= 3) && ($ChkBet($nick,$3) == True) {
    if (%congiap == on) {
      if ($2 isnum) && ($2 <= 12) && ($2 > 0) {
        if ($3 > $coidiem(diem,$nick)) { noticeVC $nick 12* $nick khÃ´ng Ã°uÂ² tiÃª`n Ã°Ã¥t | halt }
        else {
          if ($3 isnum) {
            var %congiap2 = $nick $+ * $+ $2
            var %congiap1 = $readini hethong\congiap.txt ConGiap %congiap2
            if (%congiap1 == $null) {
              writeini hethong\congiap.txt ConGiap $nick $+ * $+ $2 $int($calc($3))
              ghidiem diem $nick $calc($coidiem(diem,$nick) - $int($3))
              describeVC %r 12* $nick Ã°Ã£ Ã°Ã¥t con 0,1 $tiengviet($read(hethong\listcongiap.txt,$2)) 12 mang sÃ´' 11,01 $2 12 vÃ³Â’i sÃ´' tÃ¬Ãªn lÃ : 4,01 $ $+ $tien($3) 
            }
            if (%congiap1 != $null) { describeVC %r 12Ban Ã°Ã£ Ã°Ã¥t con  $+ $read(hethong\color.txt) $tiengviet($read(hethong\listcongiap.txt,$2)) 12 rÃ´Ã¬ }
          }
        }
      }
    }
  }
}
alias congiap_play {
  if ($lines(hethong\congiap.txt) >= 2) {
    congiap_xo
  }
  else {
    .timercongiap7 1 2 describeVC %r 0,12KhÃ´ng cÃ³ ai tham gia choÂ’i Con GiÃ¡p. Hen cÃ¡c ban vÃ o lÃ¢`n sau 
    .timercongiap8 1 %quacau choigame
  }
}
alias congiap_xo {
  set %congiap_trung $rand(1,12)
  var %cg = $tiengviet($read(hethong\listcongiap.txt,%congiap_trung))
  describeVC %r 13Con giÃ¡p oÂ’Â² vÃ²ng nÃ y lÃ : 11,1 %cg  13sÃ´' tÃ¬Ãªn ban Ã°Ã¥t Ã°uÂ’oÂ’c nhÃ¢n lÃªn gÃ¢'p 0,1 04  13lÃ¢`n
  .timercongiap9 1 2 congiap_tinhtien
}
alias congiap_tinhtien {
  var %line = 2
  var %color = $read(hethong\color.txt)
  :tongketcongiap
  if (%line <= $lines(hethong\congiap.txt)) {
    var %item = $read(hethong\congiap.txt, %line)
    var %nick = $uw(%item,1,*)
    var %trung = $uw($uw(%item,2,*),1,=)
    var %tien = $uw($uw(%item,2,*),2,=)
    if (%item == $null) { inc %line | goto tongketcongiap }
    if (%trung == %congiap_trung) {
      var %tienthuong = $calc(%tien * 4)
      var %taisan = $coidiem(diem,%nick)
      ghidiem diem %nick $calc($coidiem(diem,%nick) + %tienthuong) | describeVC %r 12Xin chÃºc mÃ¹Â’ng  $+ %color %nick  12ThÃ¥Â´ng:  $+ %color $+ $ $+ $+ $tien(%tienthuong)  3TÃ i saÂ²n:  $+ %color $+ $ $+ $tien($coidiem(diem,%nick)) 
    }
    inc %line | goto tongketcongiap
  }
  else { .timercongiap9 1 2 xoacongiap }
}
alias xoacongiap {
  write -c hethong\congiap.txt
  unset %congiap_trung
  describeVC %r 12Tam BiÃªt ! Hen CÃ¡c Ban VÃ o VÃ²ng Sau NhÃ© !
  .timercongiap10 1 %quacau choigame
}
