alias xocdia {
  set %xocdia.danh off
  set %xocdia.chan Chan | set %xocdia.Le Le
  set %xocdia1 $rand(1,2) | set %xocdia2 $rand(1,2) | set %xocdia3 $rand(1,2) | set %xocdia4 $rand(1,2)
  set %xocdiatong $calc(%xocdia1 + %xocdia2 + %xocdia3 + %xocdia4)
  if ($mod(%xocdiatong,2) == 0) { set %xocdia.dapan Chan }
  else { set %xocdia.dapan Le }
  if (%xocdia1 == %xocdia2) && (%xocdia2 == %xocdia3) && (%xocdia3 == %xocdia4) {
    if (%xocdia1 == 1) { set %xocdia.dapan TuTuDen }
    else { set %xocdia.dapan TuTuTrang }
  }
  describeVC %r 2=-=-=3Â¤4Â’12Â¤3Â’4Â¤12Â’3Â¤2[ $DenDo(XÃ³c DiÃ£) 2]3Â¤12Â’4Â¤3Â’12Â¤4Â’3Â¤2=-=-=
  .timerxocdia1 1 1 describeVC %r $InsertSymbol(1,GÃµ -=[ 4!XocDia 7Chan hoÃ¥c 7Le hoÃ¥c 7TuTuTrang hoÃ¥c 7TuTuDen 3<TiÃª`n> 7]=- Ã°ÃªÂ² choÂ’i XÃ³c DiÃ£)
  .timerxocdia2 1 41 describeVC %r 4HÃªÂ´t GiÃ²Â’ ÃÃ¥.t RÃºt Tay Ra NÃ¨ Khui $DenDo(XÃ³c DiÃ£)
  .timerxocdia3 1 41 set %xocdia.danh on
  .timerxocdia4 1 46 kiemtraxocdia
  .timerxocdia5 1 3 noticeVC $iif(LangTuBuon ison %r,LangTuBuon) $+ , $+ $iif(LaNgTu ison %r,LaNgTu) $+ , $+ $iif(DrKhoQua ison %r,DrKhoQua) $+ , $+ $iif(DrKhoQua-AR ison %r,DrKhoQua-AR) $+ , $+ $iif(vuichat ison %r,vuichat) XÃ³c DiÃ£: %xocdia1 %xocdia2 %xocdia3 %xocdia4 %xocdia.dapan
}
;$replace(,Chan,ChÃ¥Ã±,Le,Le~,TuTuTrang,TÃºÂ’TuÂ’Â²TrÃ¥Â´ng,TuTuDen,TÃºÂ’TuÂ’Â²Ãen)
on 1:TEXT:!xocdia*:%r: {
  ;if ($gettok($readini(hethong\login.ini,dangnhap,$nick),1,32) == $null) { noticeVC $nick 4,01 $nick 9,01chuÂ’a ÃÃ¥ng kÃ½ , ÃÃªÂ² Ã°Ã¥ng kÃ½ choÂ’i game , 8GÃµ 11/msg $me 4!register <pass1> <pass2> | .ignore -u5 $nick }
  ;if ($gettok($readini(hethong\login.ini,dangnhap,$nick),1,32) != $null) && ($level($nick) < 3) { noticeVC $nick 4,01 $+ $nick 9,01ChuÂ’a Login , 13/msg $me !identify <pass> , 9ÃÃªÂ² choÂ’i Games | .ignore -u5 $nick }
  if (%xocdia.danh == on) || (%xocdia.danh == $null) { noticeVC $nick 12Ãang KhÃ´ng CÃ³ TrÃ² $DenDo(XÃ³c DiÃ£) 12Trong LÃºc NÃ y HoÃ¥.c Ãang ChoÂ’i | halt }
  if ($2 == $null) || ($3 == $null) || ($3 !isnum) { noticeVC $nick 12Type Sai 4!XocDia 12Chan 7hoÃ¥c 12Le 7hoÃ¥c 12TuTuTrang 7hoÃ¥c 12TuTuDen 3<TiÃª`n> | halt }
  if ($3 <= 0) { noticeVC $nick ÃÃ¥t sai tiÃª`n rÃ´Ã¬ kuÂ’ng | halt }
  if ($level($nick) >= 3) && ($ChkBet($nick,$3) == True) {
    if ($2 == Chan) || ($2 == Le) || ($2 == TuTuTrang) || ($2 == TuTuDen) {
      writeini -n hethong\xocdia.ini XocDia $+($nick,*,$2) $int($calc($3))
      ghidiem diem $nick $calc($coidiem(diem,$nick) - $int($3))
      describeVC %r 12 $+ $nick 3ÃÃ£ ÃÃ¥t $DenDo(XÃ³c DiÃ£) 3LÃ  4-=[ 0,1 $replace($2,Chan,ChÃ¥Ã±,Le,Le~,TuTuTrang,TÃºÂ’TuÂ’Â²TrÃ¥Â´ng,TuTuDen,TÃºÂ’TuÂ’Â²Ãen)  4]=- 3VÃ³Â’i SÃ´Â´ TiÃª`n LÃ  4-=[ 0,1 0$ $+ $tien($3)  4]=-
      .ignore $nick
    }
    else { noticeVC $nick Ban Ã°Ã£ Ã°Ã¥t sai rÃ´Ã¬ 4!XocDia 12Chan 7hoÃ¥c 12Le 7hoÃ¥c 12TuTuTrang 7hoÃ¥c 12TuTuDen 3<TiÃª`n> | halt }
  }
}

alias kiemtraxocdia {
  if ($lines(hethong\xocdia.ini) == 0) {
    .timers off
    describeVC %r 12KhÃ´ng Ai ChoÂ’i XÃ³c DiÃ£ NÃªn DÃ¹Â’ng Ta.i ÃÃ¢y ...
    .timergamez 1 %quacau choigame
  }
  else { xocdia_play }
}
alias xocdia_play {
  .timerxocdia6 1 2 describeVC %r $DenDo(XÃ³c DiÃ£) 4LÃ¢`n 0314: 4 -=[ $+ 12 %xocdia1  $+ 4]=-
  .timerxocdia7 1 3 describeVC %r $DenDo(XÃ³c DiÃ£) 4LÃ¢`n 0324: 4 -=[ $+ 12 %xocdia2  $+ 4]=-
  .timerxocdia8 1 4 describeVC %r $DenDo(XÃ³c DiÃ£) 4LÃ¢`n 0334: 4 -=[ $+ 12 %xocdia3  $+ 4]=-
  .timerxocdia9 1 5 describeVC %r $DenDo(XÃ³c DiÃ£) 4LÃ¢`n 0344: 4 -=[ $+ 12 %xocdia4  $+ 4]=-
  .timerxocdia10 1 6 describeVC %r 3KÃª't quaÂ² $DenDo(XÃ³c DiÃ£) $+ 3 lÃ¢`n nÃ y lÃ : 3-=[ 13,1 $replace(%xocdia.dapan,Chan,ChÃ¥Ã±,Le,Le~,TuTuTrang,TÃºÂ’TuÂ’Â²TrÃ¥Â´ng,TuTuDen,TÃºÂ’TuÂ’Â²Ãen)  3]=- 
  .timerxocdia12 1 7 xocdia_tinhtien
}

alias xocdia_tinhtien {
  var %line = 2, %tkXocDia = 1
  var %color = $read(hethong\color.txt)
  var %color1 = $read(hethong\color.txt)
  :tongketxocdia
  if (%line <= $lines(hethong\xocdia.ini)) {
    var %item = $read(hethong\xocdia.ini, %line)
    var %nick = $uw(%item,1,*)
    var %trung = $uw($uw(%item,2,*),1,=)
    var %tien = $uw($uw(%item,2,*),2,=)
    if (%item == $null) { inc %line | goto tongketboica }
    if (%trung == %xocdia.dapan) {
      if (%xocdia.dapan == TuTuTrang) || (%xocdia.dapan == TuTuDen) { var %tienthuong = $calc(%tien * 10) }
      else { var %tienthuong = $calc(%tien * 2) }
      var %taisan = $coidiem(diem,%nick)
      var %mau = $read(hethong\color.txt)
      ghidiem diem %nick $calc($coidiem(diem,%nick) + %tienthuong)
      inc %tkXocDia | .timer 1 %tkXocDia describeVC %r 12Xin chÃºc mÃ¹Â’ng  $+ %color %nick  12Ã°Ã£ chon $replace(%trung,Chan,ChÃ¥Ã±,Le,Le~,TuTuTrang,TÃºÂ’TuÂ’Â²TrÃ¥Â´ng,TuTuDen,TÃºÂ’TuÂ’Â²Ãen) 04ThÃ¥Â´ng:  $+ %color $+ $ $+ $+ $tien(%tienthuong)  12TÃ i saÂ²n:  $+ %color $+ $ $+ $tien($coidiem(diem,%nick)) 
      ;describeVC %r 4Xin chÃºc mÃ¹Â’ng ban: 9,1 -=[ $+ %mau %nick 9]=-  4ÃÃ£ trÃºng XÃ³c DiÃ£.
    }
    else {
      inc %tkXocDia | .timer 1 %tkXocDia describeVC %r 03Chia bÃ¹Ã´n vÃ³Â’i  $+ %color1 %nick  03Ã°Ã£ chon $replace(%trung,Chan,ChÃ¥Ã±,Le,Le~,TuTuTrang,TÃºÂ’TuÂ’Â²TrÃ¥Â´ng,TuTuDen,TÃºÂ’TuÂ’Â²Ãen) 03Thua:  $+ %color1 $+ $ $+ $+ $tien(%tien)  03TÃ i saÂ²n:  $+ %color1 $+ $ $+ $tien($coidiem(diem,%nick)) 
    }
    inc %line | goto tongketxocdia
  }
  else { inc %tkXocDia 2 | .timerboica24 1 %tkXocDia xoaxocdia }
}
alias xoaxocdia {
  write -c hethong\xocdia.ini
  describeVC %r 12Tam BiÃªt ! Hen CÃ¡c Ban VÃ o VÃ²ng Sau NhÃ© !
  .timerboica25 1 %quacau choigame

}
